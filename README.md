# CrackStation, a Decrypter implementation

Reveals plaintext passwords from their unsalted hash digest.

## Overview
First, a quick, non-exhaustive overview of cryptographic hash functions. A [cryptographic hash function](https://en.wikipedia.org/wiki/Cryptographic_hash_function) is:
- *non-invertible*, or a *one-way* function: Given a hash value _h_, and plaintext _p_, there is no mathematical function that satisfies $f(h) = p$. So, if only _h_ is known, there is not a simple method to reverse-engineer the original input _p_. (keep this in mind for later)
- *deterministic*: the same input data always results in the same output hash. 
- *collision resistant*: it is difficult to find two inputs _a_ and _b_ where $H(a) = H(b)$. Any two inputs to the hash function should generate different hashes. (When this principle fails, it is called a collision. Collisions are guaranteed by the [pigeonhole principle](https://en.wikipedia.org/wiki/Pigeonhole_principle) but should be kept to a minimum).
- sensitive to small changes in its input -- representive of the _collision effect_.

The CrackStation library, by abstraction of underlying complexity (more on this below), provides that elusive "simple method" to reverse-engineer a hash function. Given an **unsalted** encrypted hash, Crackstation, if it can, will reveal the original plaintext that was used to create that hash. Assuming determinism and strong collision resistance of the hash function, the plaintext found by the CrackStation is almost guaranteed to be the corresponding original plaintext that was hashed. However, the CrackStation doesn't completely subvert the *non-invertible* principle of hash functions. Its capacity to crack is limited to the hashes of a small set of plaintext possibilities. 

### Included Hashes
As of version 1.2.0, CrackStation has the capacity to crack any unsalted SHA-1 or SHA-256 encrypted string 1-3 characters in length that contains any of the following characters:
- any upper or lower case English alphabet letter (A-Z, case insensitive)
- any numeric digit (0-9)
- the special characters ! and ?

In short (if you are RegEx-inclined), any string that matches `[A-Za-z0-9?!]{1,3}`.

### Note on Implementation and Practicality (for the curious)
CrackStation's strategy requires a greater storage burden in exchange for a smaller computation time. It relies on the storage of pre-computed hashes generated from all permutations of allowed characters. These hashes are structured as a look-up table (a Swift dictionary). When CrackStation is asked to crack a given hash, it searches for that hash in the table and, if it exists, returns the plaintext password. This is a $O(1)$ run-time efficiency for look-ups achieved by sacrificing a $O(m^n)$ space complexity, where *m* is the number of allowed characters and *n* is number of characters in the longest password CrackStation can crack. Definitely not scalable. To guarantee the capacity to crack a password of even just 5 characters, the look-up table would be required to hold over a billion entries -- just by a rough back-of-the-envelope calculation, this would require over 50 GB of storage space in a json file (and that's a conservative estimate)!

The current strategy relies on a questionable assumption; namely, the plaintext passwords users might want to crack are completely random. Perhaps instead, consider that most passwords are generated by humans and subject to human biases. A strategy which relies on hashing combinations of dictionary words or common words specific to a given user's use case might be a good choice to scale CrackStation. However, efforts to implement complex but storage-saving strategies may not even be justifed or useful. The underlying cracking strategy is largely invalidated by the modern techniques of salting or iterative hashing that are used by most entities to store passwords securely. However, some may argue that CrackStation's shortcoming is its redeeming quality -- it's a relatively innocuous tool in the hacking sphere.

## Mission Statement
CrackStation can be used to identify weak, easily crackable passwords and hopefully discourage you or your users from using them. CrackStation's ease and speed at cracking weak passwords is a concrete demonstration to justify the ubiquitious-but-maybe-not-well-understood suggestions to choose [strong passwords](https://security.harvard.edu/use-strong-passwords). The annoying password requirements are not just barriers that slow us down and strain our memory but are extremely important for securing credentials. From a cybersecurity and password storage perspective, CrackStation cautions about the dangers of neglecting to salt passwords before storing them. Also, CrackStation can be a pedagogy tool, supporting lessons about hash functions and password cracking.

Although CrackStation is limited in its scope, reversing a hash that should be irreversable may bestow some destructive power to its user. Although CrackStation does not regulate the way it is used, the author asks that users follow the "[hacker ethic](http://hacks.mit.edu/Hacks/misc/ethics.html)" outlined by MIT. According to the hacker ethic, a hack must:
- be safe
- not damage anything
- not damage anyone, either physically, mentally or emotionally
- be funny, at least to most of the people who experience it


## Installation
Before you start, confirm that you have an [SSH key](https://docs.github.com/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys) set up with your GitHub account and current machine. Also, you must have at least read permissions from this private repository (presumably you do if you are reading this.)

### Swift Package Manager
The [Swift Package Manager](https://www.swift.org/package-manager) is "a tool for managing the distribution of Swift code. It's integrated with the Swift build system to automate the process of downloading, compiling, and linking dependencies."

Once you have your Swift package set up, add CrackStation to the list of dependencies in your `Package.swift` file:

``` Swift
dependencies: [
    .package(url: "git@github.com:adeviney/CrackStation.git", .upToNextMajor: (from: "1.2.0"))
]
```

### For an App, using XCode
[Xcode](https://developer.apple.com/documentation/xcode/adding-package-dependencies-to-your-app) "comes with built-in support for source control accounts and makes it easy to leverage available Swift packages."

#### Add a package dependency to your project
Select the root of your app from the file manager. Then, under "Frameworks, Libraries, and Embedded Contact," select the `+` button.

<img width="1136" alt="Screenshot 2022-11-19 at 3 44 10 PM" src="https://user-images.githubusercontent.com/70820575/202876296-d7650b9d-f7c5-4957-9b5c-b388b9e45e6d.png">

In the pop-up window, select "Add Other..." and "Add Package Dependency..." 

<img width="409" alt="Screenshot 2022-11-19 at 3 46 55 PM" src="https://user-images.githubusercontent.com/70820575/202876333-bcaa3038-08c7-482a-bd47-cadaa0e610ed.png">

Paste this repo's URL in the search bar: https://github.com/adeviney/CrackStation

Select your desired version rule, and then click Add Package.

<img width="839" alt="Screenshot 2022-11-19 at 3 47 39 PM" src="https://user-images.githubusercontent.com/70820575/202876345-67ae4f66-0085-47bb-baf1-67b09e6770a0.png">

Success in this step shows the CrackStation listed under "Package Dependencies" in the Xcode file manager:

<img width="275" alt="Screenshot 2022-11-19 at 3 48 04 PM" src="https://user-images.githubusercontent.com/70820575/202876369-e16dba11-78ec-4c9f-971e-56ea9d6516d2.png">

\* Note that the version number shown here is outdated and will appear differently in your own workspace.


## Usage
### The API

``` Swift
public init()
```
Creates an instance of the CrackStation. No arguments needed.

``` Swift
public func decrypt(shaHash: String) -> String?
```
The `decrypt` function is the main way to utilize the CrackStation for your cracking needs.

Parameters:
- shaHash: The SHA-1 or SHA-256 digest that corresponds to the encrypted password.

Returns:
- The underlying plain-text password if `shaHash` was successfully cracked. Otherwise returns nil.

### An example

``` Swift
import CrackStation

func main() {
    // instantiate the CrackStation
    let myDecrypter = CrackStation()
    
    // run decrypter
    let crackedPassword = myDecrypter.decrypt(shaHash:
        "c0ddd62c7717180e7ffb8a15bb9674d3ec92592e0b7ac7d1d5289836b4553be2")
    print(crackedPassword ?? "uncrackable")
}
```

<img width="263" alt="image" src="https://user-images.githubusercontent.com/70820575/202877086-c622b97d-40f1-4ef9-88f8-6f733896611e.png">


## Author
[Alexis Deviney](https://github.com/adeviney)
